@model IEnumerable<DataLayer.Friends>
@using DataLayer

@{
    ViewBag.Title = "Friends";
}

<h2>Friends</h2>

@if (Model == null)
{
    <p>
        You don't have any friends yet, search for a user and add them!
    </p>
    <p>
        List of Users in the system:
    </p>

    <table>
        <tr>
            <th>Username</th>
            <th></th>
        </tr>

        @{
            GameContext gc = new GameContext();
            var users = gc.Users.ToArray();

            for (int i = 0; i < users.Length; i++)
            {
                <tr>
                    <td>@users[i].UserName</td>
                    <td>
                        @using (Html.BeginForm("AddFriend", "Home", FormMethod.Post))
                        {
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="friend" value="@users[i]">
                            <button type="submit" name="AddFriend" value="AddFriend">Add Friend</button>
                        }
                    </td>
                </tr>
            }
        }
    </table>

    // TODO: Remove list of Users and add search bar to search for Users to add
}
else
{
    <table>
        <tr>
            <th>Username</th>
            <th>Invite To Game</th>
            <th>Delete Friend</th> 
        </tr>

        @{ 
            // TODO: Display all of currently logged in user's friends
            GameContext gc = new GameContext();
            User currentUser = gc.getUserFromIdentity(User);

        }
    </table>      
}
